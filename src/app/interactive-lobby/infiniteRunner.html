<div fxFlex #gameContainer>
<mat-card 
	
	style="height: 90%;"
	fxFlex
	fxLayout="column" 
	fxLayoutAlign="center">
	<!--PREVIEW PANEL-->

	<div	
		fxFlex
		fxLayout="column"  
		id="previewScreen" 
		fxLayoutAlign="center center"
		[@HUDFadeIn]="this.isPreviewVisible? 'fadeIn' : 'fadeOut'" >
			<div fxFlex>
				<video controls (click)="toggleVideo()" id="videoPlayer">
					<source src="https://gfycat.com/enviousgigantickiwi" />
					Browser not supported
				</video>

			</div>
			<span class="mat-h2"  style="font-weight: 900;text-align: center; margin: 20px;">Infinite Runner with Three.js</span>

			<button id="playButton"  mat-fab 
				(click)="onPlayClick()">Play
			</button>
			

	
	</div>
	
	<!--MESSAGE PANEL-->
	<div fxFlex 
		fxLayout="column" 
		class="overlay-panel"
		id="messagesScreen"  
		fxLayoutAlign="center center"
		>
		<span id="messageContent" class="mat-h1"></span>
	</div>
	
	<div class ="game-container">
		

		
		
		<canvas fxFlex fxLayout="row" fxFlexFill id="c" tabindex="1"></canvas>
		
		<!--START SCREEN-->
		<div fxFlex 
			fxLayout="column" 
			class="overlay-panel"
			id="startScreen"  
			fxLayoutAlign="center center"
			[@HUDFadeIn]="!this.isLoading && !this.isPreviewVisible && this.isStartScreenVisible ? 'fadeIn' : 'fadeOut'">

				<span style="text-align: center;" class="mat-h1">Infinite runner</span>
				<div fxFlexFill class="menu"  
					id="startMenu" 
					fxFlex fxLayout="column"  
					fxLayoutGap="20px" fxLayoutAlign="center center"> 

					<div class="sub-menu" 
						[@HUDFadeIn]="this.isHomeMenuVisible ? 'fadeIn' : 'fadeOut'"
						fxFlex fxLayout="column"  
						fxLayoutGap="20px" 
						fxLayoutAlign="center center">
							<button id="menuButton" (click)="onStartClick()">NEW GAME</button>
							<button id="menuButton" (click)="getScores()">Most wanted sailors</button>
							<button id="menuButton" (click)="refresh()">QUIT</button>
					</div>

					<!--Score board -->
					<div class="sub-menu"
						[@HUDFadeIn]="!this.isHomeMenuVisible ? 'fadeIn' : 'fadeOut'"
						fxFlex fxLayout="column"  
						fxLayoutGap="20px" fxLayoutAlign="end" >
							
							<div id="scoreBoard"
								*ngFor="let score of scores" fxLayoutAlign="center" >
								<span>{{score.name}}</span>
								<span>{{score.score}}</span>

							</div>

					</div>
				</div>		
		</div>
		
		<!--LOADING SCREEN-->
		<div fxFlex 
		fxLayout="column" 
		class="overlay-panel"
		id="loadingScreen"  
		fxLayoutAlign="center center"
		[@HUDFadeIn]="this.isLoading && !this.isPreviewVisible? 'fadeIn' : 'fadeOut'">
			<div >
			  <div>...loading...</div>
			  <div class="progress"><div id="progressbar"></div></div>
			</div>
		</div>


		<!--PLAYERSTATS LAYER-->
		<div id="playerStats"  
			fxFlex fxLayout="column" fxLayoutAlign="start" fxLayoutGap="20px"
			[@HUDFadeIn]="!this.isLoading && !this.isPreviewVisible && !this.isStartScreenVisible ? 'fadeIn' : 'fadeOut'">
			<div>
				<div class="health-box">
					<div class="health-bar"></div>
					<div class="health-bar-filled"></div>
		
				</div>
			</div>


			<div id="score"
				fxLayout="row" fxLayoutAlign="center center" >
				
				<span class="mat-h2"></span>
			</div>


		</div>
		
		<!--PAUSE MENU LAYER-->
		<div id="pauseScreen" 
			class="overlay-panel" 
			fxLayout="row" 
			fxLayoutAlign ="center center" 
			[@HUDFadeIn]="this.isPauseMenuVisible? 'fadeIn' : 'fadeOut'" >
			<div class="menu" 
				id="pauseMenu"
				fxFlex fxLayout="column"  
				fxLayoutGap="20px" fxLayoutAlign="center center"> 
				
				<div class="sub-menu"
					 fxFlexFill fxFlex fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="20px"> 
					<button id="menuButton" (click)="togglePause()">RESUME</button>
					<button id="menuButton" (click)="replay()">RESTART</button>
					<button id="menuButton" (click)="refresh()">QUIT</button>
				</div>
			</div>
			
		</div>


		<!--GAME OVER LAYER-->
		<div id="gameOverScreen"
			 class="overlay-panel"
			 fxLayout="row"
			 fxLayoutAlign="center center">
			
			 <div class="menu" id="gameOverMenu" fxFlex fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="20px"> 
				<button id="menuButton" >SAVE SCORE</button>
				<button id="menuButton" (click)="replay()">RESTART</button>
				<button id="menuButton" (click)="refresh()">QUIT</button>
			</div>	
			
		</div>
		
		<!--CONTROLS LAYER-->
		<div class="overlay-panel"  fxLayout="column" fxLayoutAlign="center" >
			<div style="z-index: 4;"
				[@HUDFadeIn]="!this.isLoading && !this.isPreviewVisible ? 'fadeIn' : 'fadeOut'"
				fxLayout="row wrap" 
				fxLayoutAlign="end end">
				<button 
				id="audioButton" 
				(click)="toggleAudio()">
					<img src="../assets/icons/audio_on.svg">
				</button>

			</div>
			<div fxFlex fxLayout="column" id="ui">
				<div fxFlex 
					fxLayout="row" fxLayoutAlign="end end" 
					[@HUDFadeIn]="!this.isLoading && !this.isPreviewVisible && !this.isPauseMenuVisible? 'fadeIn' : 'fadeOut'">
					<button id="pauseButton" (click)="togglePause()">
						<img src="../assets/icons/pauseOutline.svg">
					</button>
				  </div>
				  
		  		<div id="controls" fxLayout="row" fxLayoutAlign="end" [@HUDFadeIn]="this.isControlsVisible? 'fadeIn' : 'fadeOut'">
					<div id="left"><img src="https://threejsfundamentals.org/threejs/resources/images/left.svg"></div>
					<div id="right"><img src="https://threejsfundamentals.org/threejs/resources/images/right.svg"></div>
			  	</div>
			</div>

		</div>
		
		
		
		

		
		
	</div>	
	</mat-card>

</div>